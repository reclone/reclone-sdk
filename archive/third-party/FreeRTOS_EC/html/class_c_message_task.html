<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>FreeRTOS Extension Class: CMessageTask Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">FreeRTOS Extension Class&#160;<span id="projectnumber">1.0.0</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_c_message_task.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">CMessageTask Class Reference<div class="ingroups"><a class="el" href="group___free_r_t_o_s___managed.html">FreeRTOS Managed Class Extension</a></div></div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="CMessageTask" --><!-- doxytag: inherits="AManagedTask" -->
<p><code>#include &lt;<a class="el" href="_c_message_task_8h_source.html">CMessageTask.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png"/> Inheritance diagram for CMessageTask:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_c_message_task__inherit__graph.png" border="0" usemap="#_c_message_task_inherit__map" alt="Inheritance graph"/></div>
<map name="_c_message_task_inherit__map" id="_c_message_task_inherit__map">
<area shape="rect" id="node2" href="class_a_managed_task.html" title="AManagedTask" alt="" coords="5,160,117,189"/><area shape="rect" id="node4" href="class_c_task.html" title="CTask" alt="" coords="32,83,91,112"/><area shape="rect" id="node6" href="class_i_free_r_t_o_s_obj.html" title="IFreeRTOSObj" alt="" coords="8,5,115,35"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png"/> Collaboration diagram for CMessageTask:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_c_message_task__coll__graph.png" border="0" usemap="#_c_message_task_coll__map" alt="Collaboration graph"/></div>
<map name="_c_message_task_coll__map" id="_c_message_task_coll__map">
<area shape="rect" id="node2" href="class_a_managed_task.html" title="AManagedTask" alt="" coords="5,195,117,224"/><area shape="rect" id="node4" href="class_c_task.html" title="CTask" alt="" coords="165,85,224,115"/><area shape="rect" id="node6" href="class_i_free_r_t_o_s_obj.html" title="IFreeRTOSObj" alt="" coords="193,5,300,35"/><area shape="rect" id="node11" href="class_c_queue.html" title="CQueue" alt="" coords="293,139,363,168"/><area shape="rect" id="node9" href="class_i_message_task_delegate.html" title="IMessageTaskDelegate" alt="" coords="420,195,577,224"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="class_c_message_task-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">portBASE_TYPE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_message_task.html#a96de8cccf82ec8278c33045eada2014d">OnCreate</a> (const portCHAR *const pcName, unsigned portSHORT usStackDepth, unsigned portBASE_TYPE uxPriority)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_message_task.html#aed270d89bb2e19aad076b82c7fa3cd79">Run</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_message_task.html#ab8b3ed80fc1994f881d6e21f5aeb345e">OnInit</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_message_task.html#a2c3d6ef0a92d4dfdab358bb7ad1cd219">OnTimeOut</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_message_task.html#a2a7043ff485343891a8e1cdd924dcf46">SetDelegate</a> (<a class="el" href="class_i_message_task_delegate.html">IMessageTaskDelegate</a> *pDelegate)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_message_task.html#a7c2151b0cd60f6d08a5e916b3b506aa8">SetTimeout</a> (portTickType nNewTimeOut)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_message_task.html#ae605856326a69fe9c1a740e4dde43fd2">PostMessage</a> (<a class="el" href="class_c_message.html">CMessage</a> *pMsg, portTickType nTicksToWait=portMAX_DELAY)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_message_task.html#a10e3b7cd84fbd85df5c9a7a412c036fd">PostMessageFromISR</a> (<a class="el" href="class_c_message.html">CMessage</a> *pMsg, portBASE_TYPE *pxHigherPriorityTaskWoken)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_message_task.html#a1ef4ba71084f4a739f882d68afdb59d9">SendMessage</a> (<a class="el" href="class_c_message.html">CMessage</a> *pMsg, portTickType nTicksToWait=portMAX_DELAY)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_message_task.html#a6315e8d5235e65b8804cc2e6dda08675">SenfFromISR</a> (<a class="el" href="class_c_message.html">CMessage</a> *pMsg, portBASE_TYPE *pxHigherPriorityTaskWoken)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>This class implements the Queued Message Handler (QMH) design pattern. </p>
<div class="image">
<img src="QMH.png" alt="QMH.png"/>
<div class="caption">
Queued Message Handler</div></div>
<p> The purpose of the QMH pattern is to allow asynchronous communication between tasks through a message passing paradigm. A message is defined by:</p>
<ul>
<li>a message identifier (id) that should be unique.</li>
<li>a message handler method.</li>
</ul>
<p>The prototype of a message handler is: </p>
<div class="fragment"><pre class="fragment"> <span class="keywordtype">void</span> className::MessageHandler(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> wParam) 
</pre></div><p> A derived class should not implement a task control loop (by overriding the <a class="el" href="class_a_managed_task.html#aadf1a1d95a20f1e2e831494f07d3019b">AManagedTask::Run</a> method), that is provided by the <a class="el" href="class_c_message_task.html">CMessageTask</a> class. This procedure implements the message dispatch routine. When a message is received the message loop searches the derived class's message map for an entry with the same id of the received message. If such an entry is found the associated message handler is performed and the message loop start processing the next message. Otherwise the message loop walk through the message map of the base class. If no entry able to handle the message is found, it is discarded.</p>
<p>One delegate object, implementing the <a class="el" href="class_i_message_task_delegate.html">IMessageTaskDelegate</a> interface, could be associated to a <a class="el" href="class_c_message_task.html">CMessageTask</a> object using the method <a class="el" href="class_c_message_task.html#a2a7043ff485343891a8e1cdd924dcf46">CMessageTask::SetDelegate</a>. A delegate receive a notification from the task before and after a message is dispatched.</p>
<p>The <a class="el" href="_message_macro_8h.html">MessageMacro.h</a> file export a set of macro in order to declare and define the message map in a derived class.</p>
<p><b>Use Cases</b></p>
<ul>
<li>Gate keeper</li>
<li>Command Handler Task.</li>
</ul>
<p><b>Example</b> </p>
<div class="fragment"><pre class="fragment"> <span class="comment">//In the header file</span>

<span class="preprocessor"> #define MSG_1 APP_MSG + 1</span>
<span class="preprocessor"></span><span class="preprocessor"> #define MSG_2 APP_MSG + 2</span>
<span class="preprocessor"></span>
 <span class="keyword">class </span>MyClass: <span class="keyword">public</span> <a class="code" href="class_c_message_task.html">CMessageTask</a>
 {
       <a class="code" href="_message_macro_8h.html#aa220e0d847b40ac7bf38688d42821e17">DECLARE_MESSAGE_MAP</a>(CMessageTestTask)

       public:
       CMessageTestTask();
       virtual ~CMessageTestTask();

       <span class="keywordtype">void</span> Message1Handler(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> wParam);
       <span class="keywordtype">void</span> Message2Handler(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> wParam);
 };

 <span class="comment">// In the implementation file</span>
 <a class="code" href="_message_macro_8h.html#a01c4e72b757d6006bddc4cfc6e8e25d0">BEGIN_MESSAGE_MAP</a>(<a class="code" href="class_c_message_task.html">CMessageTask</a>, MyClass)
   <a class="code" href="_message_macro_8h.html#a9d97c0c5415d0b10c7601b8e5712db27">MESSAGE_MAP_ENTRY</a>(MyClass, MSG_1, Message1Handler)
   <a class="code" href="_message_macro_8h.html#a9d97c0c5415d0b10c7601b8e5712db27">MESSAGE_MAP_ENTRY</a>(MyClass, MSG_2, Message2Handler)
 <a class="code" href="_message_macro_8h.html#aca96985a76d98a4bf0cba4dd07e14320">END_MESSAGE_MAP</a>(CMessageTestTask)
</pre></div><dl class="date"><dt><b>Date:</b></dt><dd>Feb 28, 2011 </dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>Stefano Oliveri (STF12.net) E-mail: <a href="mailto:software@stf12.net">software@stf12.net</a> </dd></dl>

<p>Definition at line <a class="el" href="_c_message_task_8h_source.html#l00073">73</a> of file <a class="el" href="_c_message_task_8h_source.html">CMessageTask.h</a>.</p>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a96de8cccf82ec8278c33045eada2014d"></a><!-- doxytag: member="CMessageTask::OnCreate" ref="a96de8cccf82ec8278c33045eada2014d" args="(const portCHAR *const pcName, unsigned portSHORT usStackDepth, unsigned portBASE_TYPE uxPriority)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">portBASE_TYPE CMessageTask::OnCreate </td>
          <td>(</td>
          <td class="paramtype">const portCHAR *const&#160;</td>
          <td class="paramname"><em>pcName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned portSHORT&#160;</td>
          <td class="paramname"><em>usStackDepth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned portBASE_TYPE&#160;</td>
          <td class="paramname"><em>uxPriority</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>A subclass overriding this methods should call the base implementation. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="class_a_managed_task.html#a28fe56c838b61d98302cc4af383e1b05">AManagedTask::OnCreate</a></dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pcName</td><td>specifies the name assigned to the task for debug purpose. </td></tr>
    <tr><td class="paramname">usStackDepth</td><td>specifies the task stack size in words. </td></tr>
    <tr><td class="paramname">uxPriority</td><td>specifies the task priority. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="class_a_managed_task.html#a28fe56c838b61d98302cc4af383e1b05">AManagedTask</a>.</p>

<p>Definition at line <a class="el" href="_c_message_task_8cpp_source.html#l00026">26</a> of file <a class="el" href="_c_message_task_8cpp_source.html">CMessageTask.cpp</a>.</p>

<p>References <a class="el" href="_c_queue_8cpp_source.html#l00025">CQueue::Create()</a>, and <a class="el" href="_c_queue_8h_source.html#l00226">CQueue::IsValid()</a>.</p>

</div>
</div>
<a class="anchor" id="ab8b3ed80fc1994f881d6e21f5aeb345e"></a><!-- doxytag: member="CMessageTask::OnInit" ref="ab8b3ed80fc1994f881d6e21f5aeb345e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool CMessageTask::OnInit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Called by the framework after the scheduler is started, but before the task enter its message loop. Use this method to perform one shot task initialization.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>true</code> if success, <code>false</code> otherwise. </dd></dl>

<p>Definition at line <a class="el" href="_c_message_task_8h_source.html#l00129">129</a> of file <a class="el" href="_c_message_task_8h_source.html">CMessageTask.h</a>.</p>

<p>Referenced by <a class="el" href="_c_message_task_8cpp_source.html#l00033">Run()</a>.</p>

</div>
</div>
<a class="anchor" id="a2c3d6ef0a92d4dfdab358bb7ad1cd219"></a><!-- doxytag: member="CMessageTask::OnTimeOut" ref="a2c3d6ef0a92d4dfdab358bb7ad1cd219" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void CMessageTask::OnTimeOut </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Called by the framework during the message loop when the timeout expire and no message are received. </p>

<p>Definition at line <a class="el" href="_c_message_task_8h_source.html#l00135">135</a> of file <a class="el" href="_c_message_task_8h_source.html">CMessageTask.h</a>.</p>

<p>Referenced by <a class="el" href="_c_message_task_8cpp_source.html#l00033">Run()</a>.</p>

</div>
</div>
<a class="anchor" id="ae605856326a69fe9c1a740e4dde43fd2"></a><!-- doxytag: member="CMessageTask::PostMessage" ref="ae605856326a69fe9c1a740e4dde43fd2" args="(CMessage *pMsg, portTickType nTicksToWait=portMAX_DELAY)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CMessageTask::PostMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_c_message.html">CMessage</a> *&#160;</td>
          <td class="paramname"><em>pMsg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">portTickType&#160;</td>
          <td class="paramname"><em>nTicksToWait</em> = <code>portMAX_DELAY</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Try to post a message to the task's message queue. This method block the calling task for nTicksToWait ticks if the task's message queue is full. If nTickToWait is equal to <code>portMAX_DELAY</code> (the default value) and the <code>INCLUDE_vTaskSuspend</code> is set to 1 in the FreeRTOS configuration file, the calling task block indefinitely.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pMsg</td><td>specifies the message to post. </td></tr>
    <tr><td class="paramname">nTicksToWait</td><td>specifies the maximum amount of time the calling task should block. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>true</code> if the message was posted, <code>false</code> otherwise. </dd></dl>

<p>Definition at line <a class="el" href="_c_message_task_8cpp_source.html#l00075">75</a> of file <a class="el" href="_c_message_task_8cpp_source.html">CMessageTask.cpp</a>.</p>

<p>References <a class="el" href="_c_queue_8h_source.html#l00151">CQueue::Send()</a>.</p>

</div>
</div>
<a class="anchor" id="a10e3b7cd84fbd85df5c9a7a412c036fd"></a><!-- doxytag: member="CMessageTask::PostMessageFromISR" ref="a10e3b7cd84fbd85df5c9a7a412c036fd" args="(CMessage *pMsg, portBASE_TYPE *pxHigherPriorityTaskWoken)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CMessageTask::PostMessageFromISR </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_c_message.html">CMessage</a> *&#160;</td>
          <td class="paramname"><em>pMsg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">portBASE_TYPE *&#160;</td>
          <td class="paramname"><em>pxHigherPriorityTaskWoken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Try post a message to the task's message queue. It is safe to use this function from within an interrupt service routine.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="class_c_message_task.html#ae605856326a69fe9c1a740e4dde43fd2">PostMessage</a></dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pMsg</td><td>specifies the message to post. </td></tr>
    <tr><td class="paramname">pxHigherPriorityTaskWoken</td><td>this output parameter is set to <code>pdTRUE </code> if posting the message caused a task to unblock, and the unblocked task has a priority higher than the currently running task. In this case a context switch should be requested before the interrupt is exited. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>true</code> if the message was successfully posted, <code>false</code> otherwise. </dd></dl>

<p>Definition at line <a class="el" href="_c_message_task_8cpp_source.html#l00079">79</a> of file <a class="el" href="_c_message_task_8cpp_source.html">CMessageTask.cpp</a>.</p>

<p>References <a class="el" href="_c_queue_8h_source.html#l00156">CQueue::SendFromISR()</a>.</p>

</div>
</div>
<a class="anchor" id="aed270d89bb2e19aad076b82c7fa3cd79"></a><!-- doxytag: member="CMessageTask::Run" ref="aed270d89bb2e19aad076b82c7fa3cd79" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CMessageTask::Run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Task control function. It implements the message loop. </p>

<p>Implements <a class="el" href="class_a_managed_task.html#aadf1a1d95a20f1e2e831494f07d3019b">AManagedTask</a>.</p>

<p>Definition at line <a class="el" href="_c_message_task_8cpp_source.html#l00033">33</a> of file <a class="el" href="_c_message_task_8cpp_source.html">CMessageTask.cpp</a>.</p>

<p>References <a class="el" href="_c_task_8cpp_source.html#l00060">CTask::Delete()</a>, <a class="el" href="class_i_message_task_delegate.html#a3aa3a93457154adeb5e4a614ee8925d2">IMessageTaskDelegate::DidHandleEvent()</a>, <a class="el" href="class_i_message_task_delegate.html#ac6dccbcbbdb6bc1b32071cc7d4830b98">IMessageTaskDelegate::OnHandleEvent()</a>, <a class="el" href="_c_message_task_8h_source.html#l00129">OnInit()</a>, <a class="el" href="_c_message_task_8h_source.html#l00135">OnTimeOut()</a>, <a class="el" href="_c_queue_8h_source.html#l00182">CQueue::Receive()</a>, and <a class="el" href="_c_task_8h_source.html#l00273">CTask::Suspend()</a>.</p>

</div>
</div>
<a class="anchor" id="a1ef4ba71084f4a739f882d68afdb59d9"></a><!-- doxytag: member="CMessageTask::SendMessage" ref="a1ef4ba71084f4a739f882d68afdb59d9" args="(CMessage *pMsg, portTickType nTicksToWait=portMAX_DELAY)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CMessageTask::SendMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_c_message.html">CMessage</a> *&#160;</td>
          <td class="paramname"><em>pMsg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">portTickType&#160;</td>
          <td class="paramname"><em>nTicksToWait</em> = <code>portMAX_DELAY</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Try to send an high priority to the task's message queue. A message sent using this method bypass all others pending message, so that it is the next processed message. This method block the calling task for nTicksToWait ticks if the task's message queue is full. If nTickToWait is equal to <code>portMAX_DELAY</code> (the default value) and the <code>INCLUDE_vTaskSuspend</code> is set to 1 in the FreeRTOS configuration file, the calling task block indefinitely.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pMsg</td><td>specifies the message to send. </td></tr>
    <tr><td class="paramname">nTicksToWait</td><td>specifies the maximum amount of time the calling task should block. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>true</code> if the message was sent, <code>false</code> otherwise. </dd></dl>

<p>Definition at line <a class="el" href="_c_message_task_8cpp_source.html#l00083">83</a> of file <a class="el" href="_c_message_task_8cpp_source.html">CMessageTask.cpp</a>.</p>

<p>References <a class="el" href="_c_queue_8h_source.html#l00175">CQueue::SendToFront()</a>.</p>

</div>
</div>
<a class="anchor" id="a6315e8d5235e65b8804cc2e6dda08675"></a><!-- doxytag: member="CMessageTask::SenfFromISR" ref="a6315e8d5235e65b8804cc2e6dda08675" args="(CMessage *pMsg, portBASE_TYPE *pxHigherPriorityTaskWoken)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CMessageTask::SenfFromISR </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_c_message.html">CMessage</a> *&#160;</td>
          <td class="paramname"><em>pMsg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">portBASE_TYPE *&#160;</td>
          <td class="paramname"><em>pxHigherPriorityTaskWoken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Try to send an high priority to the task's message queue. It is safe to use this function from within an interrupt service routine.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="class_c_message_task.html#a1ef4ba71084f4a739f882d68afdb59d9">SendMessage</a></dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pMsg</td><td>specifies the message to send. </td></tr>
    <tr><td class="paramname">pxHigherPriorityTaskWoken</td><td>specifies the maximum amount of time the calling task should block. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>true</code> if the message was sent, <code>false</code> otherwise. </dd></dl>

<p>Definition at line <a class="el" href="_c_message_task_8cpp_source.html#l00087">87</a> of file <a class="el" href="_c_message_task_8cpp_source.html">CMessageTask.cpp</a>.</p>

<p>References <a class="el" href="_c_queue_8h_source.html#l00203">CQueue::SendToFrontFromISR()</a>.</p>

</div>
</div>
<a class="anchor" id="a2a7043ff485343891a8e1cdd924dcf46"></a><!-- doxytag: member="CMessageTask::SetDelegate" ref="a2a7043ff485343891a8e1cdd924dcf46" args="(IMessageTaskDelegate *pDelegate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CMessageTask::SetDelegate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_message_task_delegate.html">IMessageTaskDelegate</a> *&#160;</td>
          <td class="paramname"><em>pDelegate</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set the task delegate object. This object is notified during the message dispatching loop, before and after the message is dispatched. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pDelegate</td><td>specifies the delegate object. If <code>NULL</code> the current delegate is removed. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_c_message_task_8h_source.html#l00209">209</a> of file <a class="el" href="_c_message_task_8h_source.html">CMessageTask.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7c2151b0cd60f6d08a5e916b3b506aa8"></a><!-- doxytag: member="CMessageTask::SetTimeout" ref="a7c2151b0cd60f6d08a5e916b3b506aa8" args="(portTickType nNewTimeOut)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CMessageTask::SetTimeout </td>
          <td>(</td>
          <td class="paramtype">portTickType&#160;</td>
          <td class="paramname"><em>nNewTimeOut</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set the timeout the will block waiting for new message. The default value is <code>portMAX_DELAY</code> that cause the task will wait indefinitely.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">nNewTimeOut</td><td>specifies a new timeout value. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_c_message_task_8h_source.html#l00214">214</a> of file <a class="el" href="_c_message_task_8h_source.html">CMessageTask.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_c_message_task_8h_source.html">CMessageTask.h</a></li>
<li><a class="el" href="_c_message_task_8cpp_source.html">CMessageTask.cpp</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_c_message_task.html">CMessageTask</a>      </li>
      <li class="footer">Generated on Thu Jul 28 2011 09:52:50 for FreeRTOS Extension Class by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
